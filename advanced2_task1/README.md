# Meme 代币 理论分析

## 1. 代币税制分析
使得短线套利于频繁交易的成本上升，从而提高价格稳定性；
代币税的一部分直接进入AMM流动池，从而改善市场的流动性，缓冲大单买卖对价格的冲击。
**常见的代币税征收方式：**
1. 交易税 Transaction Tax：当用户执行买卖操作的时候，智能合约会自动扣除一定比例的代币作为税收。
2. 持有税 Hold Tax：将交易税中一部分按比例分配给所有现有的代币持有者，持有的代币越多，分到的奖励就越多。
3. 流动池税 Liquidity Pool Tax: 交易税中的一部分被自动转换成代币和主流币的配对资产，并添加到流动池中。
4. 销毁税 Burn Tax: 将每笔交易中一定比例的代币被直接发送到一个无法访问的“销毁地址”。
5. 国库税 Treasure Tax: 交易税的一部分转入国库钱包，用于项目运营。

如果要抑制投机，鼓励长期持有，则设置较高的卖出税（10% - 15%）和较低的买入税（0-5%），同时将其中的一部分奖励给持有者。

如果要实现极致的通缩和稀缺性，则设置较高的总交易税（15% - 20%），并将税收的大部分分配给销毁税。

如果要保障项目的长期发展和稳定性，则可设置一个中等的总税率，税收分配侧重于“流动池税”和“国库税”。

如果是在项目启动阶段，想要吸引用户，则设置较高的持有税和流动性税。

## 2. 流动性池原理探究
流动性池的核心是一种自动化做市商（AMM）的机制，它完全摈弃了买家和卖家直接匹配的模式。
大多数流动池都基于一个恒定乘积公式：
`X * Y = K`
X，Y 分别为两种代币的数量，K为恒定乘积，也代表流动性。
任何交易都必须遵守 `(x + Δx) * (y + Δy) = k` 这个规则。
当用户注入或撤出流动性的时候，必须按照池子当前的比例注入代币。

**与传统的订单簿模式（Order Book）的区别：**
- 参与者：AMM由交易者与流动性提供者（LP）组成，而传统模式由买家，卖家和做市商组成。
- 定价方式：AMM由公式决定，传统模式由最高买价和最低卖价决定。
- 流动性来源：AMM的流动性来源于闲置资金池，而传统模式来源于市场的报价单。
- 功能：AMM的功能比较单一几乎只能Swap，但是简单快捷，没有资金托管风险；而传统模式功能更丰富支持限价，止损，杠杆功能，但是也更加复杂，并且依赖于中心化服务器的安全和稳定性。

**流动性提供者（LP）如何获得收益和面临风险**
- 收益主要来源于手续费，AMM协议会对每笔交易扣除一定比例的费用，直接添加到流动池的总资产中，因此使得LP代币份额的总价值提升。
- **无偿损失（hence impermanent）：** 当存入AMM池中的资产相对价格发生变化时，外界的套利者会涌入池子买入更便宜的代币，这使得池内资产结构偏离了原始状态，而对于LP来说，相对于单纯持有原资产来说产生了损失。如果代币相对价格重新回到了原来的比例，损失也就消失了，但是如果LP在价格偏离的时候撤出了流动性，损失就成了永久性的。
- **智能合约风险：** 如果合约代码中有未被发现的漏洞，黑客可能会利用漏洞盗走池子中的所有资金。

## 3. 交易限制策略探讨
**目的**
- 防止价格操纵
    - Pump and Dump: 巨鲸（持有大量代币的地址）通过大笔买卖拉高诱多，然后迅速减持导致价格崩盘。
    - Rug Pull：项目方拥有大量代币，如果没有任何限制，他们可以在流动池创建后立刻抛售所有代币，卷款跑路。
- 交易限制可以保护多数普通散户，防止恶意收割，减缓价格下跌速度，限制恐慌抛售的连锁反应。
- 增加项目的可信度，Fair Launch

**交易限制策略**
- 交易额限制 Transaction Amount Limit
    - 规定一次交易中最多可以买入或者卖出多少，通常为共供应量的百分百。
    - 优点：最直接防止巨鲸通过单笔大额交易操纵市场。
    - 缺点：可能阻碍代币在大型的交易所上市或者与大基金合作。
- 持有额度限制 Maximum Holding Limit
    - 规定一个钱包地址可以持有的代币数量上限。
    - 优点：防止代币所有权过度集中。
    - 缺点：无法吸引大型投资者。
- 交易频率限制 Cooldown Restrictions
    - 规定完成一次买卖之后，必须等待一段冷却时间才能进行下一次交易。
    - 优点：抑制高频机器人交易，延缓恐慌性抛售。
    - 缺点：在需要快速应对市场变化的时候，影响客户体验。
- 渐进式税率 Progressive Tax Rates
    - 根据交易规模调整交易税率。
    - 优点：非常灵活，激励长期持有。
    - 确定：代码复杂性增加，增加了合约审计难度和出现漏洞的风险。


## 4. 代码功能
代币税功能：实现交易税机制，对每笔代币交易征收一定比例的税费，并将税费分配给特定的地址或用于特定的用途。
流动性池集成：设计并实现与流动性池的交互功能，支持用户向流动性池添加和移除流动性。
交易限制功能：设置合理的交易限制，如单笔交易最大额度、每日交易次数限制等，防止恶意操纵市场。

## 5. Sepolia Testnet

#### 1. Deploy Contract
Uniswap Router: `0xeE567Fe1712Faf6149d80dA1E6934E354124CfE3` \
Contract Deployed At: `0x7779e6f2FC6f720bfb44b0bc3e035364488f0F79` \
Uniswap Pair Created At: `0x210e11c8B47bE3584fC92e45639b7a14f21BDD27`

#### 2. Add InitialLiquidity
value: 1000000000000000000 \
tokenAmount: 1000000000000000000
lp aquired: 0.9999999...